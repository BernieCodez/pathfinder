
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pathfinder</title>
    <link id="theme-link" rel="stylesheet" href="style.css" />
  </head>
  <body>
    <h1 class="invis"></h1>
    <h1 class="type"></h1>
    <p id="play" style="display: none;" class = "clickable"  onclick="window.location.href='play.html'">Play</p>
    <p id="help" style="display: none;" class = "clickable"  onclick="window.location.href='help.html'">Help</p>
    <p id="settings" style="display: none;" class = "clickable" onclick="window.location.href='settings.html'">Settings</p>

    <script>
      if(sessionStorage.getItem("animate") == null){
        sessionStorage.setItem("animate", true);
      }
        //ANIMATIONS//
        const textElement = document.querySelector(".type");
        
        const play = document.getElementById('play');
        const help = document.getElementById('help');
        const settings = document.getElementById('settings');

        function Type(element, text, time, i=0){
            
            element.textContent += text[i];
            if(i===text.length-1){
                return;
            }
            setTimeout(() => Type(element, text, time, i+1), time);
            

        }


        function fadeIn(element, duration) {
            element.style.opacity = 0;
            element.style.display = "block";
            let startTime = null;

            function animation(currentTime) {
                if (!startTime) {
                startTime = currentTime;
                }

                const timeElapsed = currentTime - startTime;
                const progress = Math.min(timeElapsed / duration, 1); 
                element.style.opacity = progress;

                if (timeElapsed < duration) {
                requestAnimationFrame(animation);
                }
            }
            requestAnimationFrame(animation);
        }
        

        if(sessionStorage.getItem("animate") === "true"){
          setTimeout(() => Type(textElement, "Pathfinder", 100), 500);

          setTimeout(() => 
        textElement.style.transform = 'translateY(-10rem)'
        , 1750);

          setTimeout(() => fadeIn(play, 1000), 1750);
          setTimeout(() => fadeIn(help, 1000), 2000);
          setTimeout(() => fadeIn(settings, 1000), 2250);
          sessionStorage.setItem("animate", false);
        }else{
          textElement.textContent = "Pathfinder";
          //Type(textElement, "Pathfinder", 0);

          textElement.style.transition = "none";
          textElement.style.transform = 'translateY(-10rem)'
          //textElement.style.transition = "all 1s ease";

          play.style.display = "block";
          help.style.display = "block";
          settings.style.display = "block";

          // fadeIn(play, 0);
          // fadeIn(help,0);
          // fadeIn(settings,0);
        }
        
            
            

        //ANIMATIONS//
        

    </script>
  </body>
</html>
